(()=>{"use strict";var e,t={822(){const e=window.wp.blocks,t=window.wp.i18n,s=window.wp.blockEditor,i=window.wp.components,n=window.wp.element,a=window.ReactJSXRuntime,o=[["core/heading",{level:2,content:"Kategoria",placeholder:(0,t.__)("Kategorian otsikko...","dude")}],["core/paragraph",{content:"Kategorian kuvaus.",placeholder:(0,t.__)("Kategorian kuvaus...","dude")}]];(0,e.registerBlockType)("dude/pricing-category",{edit:function({attributes:e,setAttributes:l}){const{items:r}=e,[c,d]=(0,n.useState)(null),[u,p]=(0,n.useState)(null),h=(0,s.useBlockProps)({className:"block block-pricing-category has-unified-padding-if-stacked"}),x=(e,t,s)=>{const i=[...r];i[e]={...i[e],[t]:s},l({items:i})},m=(e,t)=>{const s=[...r],i=e+t;i<0||i>=r.length||([s[e],s[i]]=[s[i],s[e]],l({items:s}))},v=e=>{p(u===e?null:e)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.InspectorControls,{children:[(0,a.jsx)(i.PanelBody,{title:(0,t.__)("Kategorian asetukset","dude"),children:(0,a.jsx)("p",{style:{color:"#757575",fontSize:"12px"},children:(0,t.__)("Muokkaa kategorian otsikkoa ja kuvausta suoraan lohkossa. Lisää ja muokkaa tuotteita alla.","dude")})}),r.map((e,s)=>(0,a.jsxs)(i.PanelBody,{title:e.title||`Tuote ${s+1}`,initialOpen:c===s,onToggle:()=>d(c===s?null:s),children:[(0,a.jsx)(i.TextControl,{label:(0,t.__)("Otsikko","dude"),value:e.title,onChange:e=>x(s,"title",e)}),(0,a.jsx)(i.ToggleControl,{label:(0,t.__)("Suosituin","dude"),checked:e.isPopular,onChange:e=>x(s,"isPopular",e)}),(0,a.jsx)(i.TextControl,{label:(0,t.__)("Hinta","dude"),value:e.price,onChange:e=>x(s,"price",e)}),(0,a.jsx)(i.TextControl,{label:(0,t.__)("Lyhyt kuvaus","dude"),value:e.shortDescription,onChange:e=>x(s,"shortDescription",e)}),(0,a.jsx)(i.TextareaControl,{label:(0,t.__)("Sisältö (avattu)","dude"),value:e.content,onChange:e=>x(s,"content",e)}),(0,a.jsx)("p",{children:(0,a.jsx)("strong",{children:(0,t.__)("Ominaisuudet","dude")})}),(e.features||[]).map((e,n)=>(0,a.jsxs)("div",{style:{display:"flex",gap:"8px",marginBottom:"8px"},children:[(0,a.jsx)(i.TextControl,{value:e,onChange:e=>((e,t,s)=>{const i=[...r],n=[...i[e].features];n[t]=s,i[e]={...i[e],features:n},l({items:i})})(s,n,e),style:{flex:1}}),(0,a.jsx)(i.Button,{isDestructive:!0,variant:"secondary",onClick:()=>((e,t)=>{const s=[...r],i=s[e].features.filter((e,s)=>s!==t);s[e]={...s[e],features:i},l({items:s})})(s,n),style:{flexShrink:0},children:(0,t.__)("Poista","dude")})]},n)),(0,a.jsx)(i.Button,{variant:"secondary",onClick:()=>(e=>{const t=[...r],s=[...t[e].features||[],"Uusi ominaisuus"];t[e]={...t[e],features:s},l({items:t})})(s),style:{marginBottom:"16px"},children:(0,t.__)("+ Lisää ominaisuus","dude")}),(0,a.jsxs)("div",{style:{display:"flex",gap:"8px",marginTop:"16px",borderTop:"1px solid #ddd",paddingTop:"16px"},children:[(0,a.jsx)(i.Button,{variant:"secondary",onClick:()=>m(s,-1),disabled:0===s,children:(0,t.__)("Ylös","dude")}),(0,a.jsx)(i.Button,{variant:"secondary",onClick:()=>m(s,1),disabled:s===r.length-1,children:(0,t.__)("Alas","dude")}),(0,a.jsx)(i.Button,{isDestructive:!0,onClick:()=>(e=>{const t=r.filter((t,s)=>s!==e);l({items:t})})(s),children:(0,t.__)("Poista tuote","dude")})]})]},e.id||s)),(0,a.jsx)(i.PanelBody,{children:(0,a.jsx)(i.Button,{variant:"primary",onClick:()=>{const e=[...r,{id:Date.now(),title:"Uusi tuote",isPopular:!1,price:"0 €",shortDescription:"Lyhyt kuvaus",content:"Pidempi kuvaus tuotteesta.",features:["Ominaisuus 1","Ominaisuus 2"]}];l({items:e})},children:(0,t.__)("+ Lisää tuote","dude")})})]}),(0,a.jsx)("section",{...h,children:(0,a.jsx)("div",{className:"container",children:(0,a.jsxs)("div",{className:"pricing-category",children:[(0,a.jsx)("div",{className:"category-info",children:(0,a.jsx)(s.InnerBlocks,{template:o,templateLock:"all"})}),(0,a.jsx)("div",{className:"category-items",children:(0,a.jsxs)("div",{className:"pricing-accordion",children:[0===r.length&&(0,a.jsx)("p",{style:{color:"#999",fontStyle:"italic"},children:(0,t.__)("Lisää tuotteita sivupalkista.","dude")}),r.map((e,t)=>{const s=u===t;return(0,a.jsxs)("div",{className:"pricing-accordion-item"+(e.isPopular?" is-popular":""),"aria-expanded":s?"true":"false",onClick:()=>v(t),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),v(t))},role:"button",tabIndex:0,children:[(0,a.jsxs)("div",{className:"item-main",children:[(0,a.jsxs)("div",{className:"item-content",children:[(0,a.jsxs)("div",{className:"item-header",children:[(0,a.jsx)("h3",{children:e.title}),e.isPopular&&(0,a.jsx)("span",{className:"badge",children:"Suosituin"})]}),(0,a.jsxs)("div",{className:"item-meta",children:[(0,a.jsx)("span",{className:"price",children:e.price}),(0,a.jsx)("span",{className:"description",children:e.shortDescription})]})]}),(0,a.jsx)("span",{className:"icon","aria-hidden":"true"})]}),s&&(0,a.jsxs)("div",{className:"accordion-content",children:[(0,a.jsx)("p",{children:e.content}),e.features&&e.features.length>0&&(0,a.jsx)("ul",{children:e.features.map((e,t)=>(0,a.jsx)("li",{children:e},t))})]})]},e.id||t)})]})})]})})})]})},save:()=>null})}},s={};function i(e){var n=s[e];if(void 0!==n)return n.exports;var a=s[e]={exports:{}};return t[e](a,a.exports,i),a.exports}i.m=t,e=[],i.O=(t,s,n,a)=>{if(!s){var o=1/0;for(d=0;d<e.length;d++){for(var[s,n,a]=e[d],l=!0,r=0;r<s.length;r++)(!1&a||o>=a)&&Object.keys(i.O).every(e=>i.O[e](s[r]))?s.splice(r--,1):(l=!1,a<o&&(o=a));if(l){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[s,n,a]},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};i.O.j=t=>0===e[t];var t=(t,s)=>{var n,a,[o,l,r]=s,c=0;if(o.some(t=>0!==e[t])){for(n in l)i.o(l,n)&&(i.m[n]=l[n]);if(r)var d=r(i)}for(t&&t(s);c<o.length;c++)a=o[c],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(d)},s=globalThis.webpackChunk=globalThis.webpackChunk||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var n=i.O(void 0,[350],()=>i(822));n=i.O(n)})();