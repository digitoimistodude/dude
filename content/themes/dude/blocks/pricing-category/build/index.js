(()=>{"use strict";const e=window.wp.blocks,i=window.wp.i18n,s=window.wp.blockEditor,t=window.wp.components,a=window.wp.element,n=window.ReactJSXRuntime;(0,e.registerBlockType)("dude/pricing-category",{edit:function({attributes:e,setAttributes:o}){const{categoryTitle:l,categoryDescription:r,items:d}=e,[c,u]=(0,a.useState)(null),p=(0,s.useBlockProps)({className:"block block-pricing-category has-unified-padding-if-stacked"}),h=(e,i,s)=>{const t=[...d];t[e]={...t[e],[i]:s},o({items:t})},x=(e,i)=>{const s=[...d],t=e+i;t<0||t>=d.length||([s[e],s[t]]=[s[t],s[e]],o({items:s}))};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.InspectorControls,{children:[(0,n.jsx)(t.PanelBody,{title:(0,i.__)("Kategorian asetukset","dude"),children:(0,n.jsx)("p",{style:{color:"#757575",fontSize:"12px"},children:(0,i.__)("Muokkaa kategorian otsikkoa ja kuvausta suoraan lohkossa. Lisää ja muokkaa tuotteita alla.","dude")})}),d.map((e,s)=>(0,n.jsxs)(t.PanelBody,{title:e.title||`Tuote ${s+1}`,initialOpen:c===s,onToggle:()=>u(c===s?null:s),children:[(0,n.jsx)(t.TextControl,{label:(0,i.__)("Otsikko","dude"),value:e.title,onChange:e=>h(s,"title",e)}),(0,n.jsx)(t.ToggleControl,{label:(0,i.__)("Suosituin","dude"),checked:e.isPopular,onChange:e=>h(s,"isPopular",e)}),(0,n.jsx)(t.TextControl,{label:(0,i.__)("Hinta","dude"),value:e.price,onChange:e=>h(s,"price",e)}),(0,n.jsx)(t.TextControl,{label:(0,i.__)("Lyhyt kuvaus","dude"),value:e.shortDescription,onChange:e=>h(s,"shortDescription",e)}),(0,n.jsx)(t.TextareaControl,{label:(0,i.__)("Sisältö (avattu)","dude"),value:e.content,onChange:e=>h(s,"content",e)}),(0,n.jsx)("p",{children:(0,n.jsx)("strong",{children:(0,i.__)("Ominaisuudet","dude")})}),(e.features||[]).map((e,a)=>(0,n.jsxs)("div",{style:{display:"flex",gap:"8px",marginBottom:"8px"},children:[(0,n.jsx)(t.TextControl,{value:e,onChange:e=>((e,i,s)=>{const t=[...d],a=[...t[e].features];a[i]=s,t[e]={...t[e],features:a},o({items:t})})(s,a,e),style:{flex:1}}),(0,n.jsx)(t.Button,{isDestructive:!0,variant:"secondary",onClick:()=>((e,i)=>{const s=[...d],t=s[e].features.filter((e,s)=>s!==i);s[e]={...s[e],features:t},o({items:s})})(s,a),style:{flexShrink:0},children:(0,i.__)("Poista","dude")})]},a)),(0,n.jsx)(t.Button,{variant:"secondary",onClick:()=>(e=>{const i=[...d],s=[...i[e].features||[],"Uusi ominaisuus"];i[e]={...i[e],features:s},o({items:i})})(s),style:{marginBottom:"16px"},children:(0,i.__)("+ Lisää ominaisuus","dude")}),(0,n.jsxs)("div",{style:{display:"flex",gap:"8px",marginTop:"16px",borderTop:"1px solid #ddd",paddingTop:"16px"},children:[(0,n.jsx)(t.Button,{variant:"secondary",onClick:()=>x(s,-1),disabled:0===s,children:(0,i.__)("Ylös","dude")}),(0,n.jsx)(t.Button,{variant:"secondary",onClick:()=>x(s,1),disabled:s===d.length-1,children:(0,i.__)("Alas","dude")}),(0,n.jsx)(t.Button,{isDestructive:!0,onClick:()=>(e=>{const i=d.filter((i,s)=>s!==e);o({items:i})})(s),children:(0,i.__)("Poista tuote","dude")})]})]},e.id||s)),(0,n.jsx)(t.PanelBody,{children:(0,n.jsx)(t.Button,{variant:"primary",onClick:()=>{const e=[...d,{id:Date.now(),title:"Uusi tuote",isPopular:!1,price:"0 €",shortDescription:"Lyhyt kuvaus",content:"Pidempi kuvaus tuotteesta.",features:["Ominaisuus 1","Ominaisuus 2"]}];o({items:e})},children:(0,i.__)("+ Lisää tuote","dude")})})]}),(0,n.jsx)("section",{...p,children:(0,n.jsx)("div",{className:"container",children:(0,n.jsxs)("div",{className:"pricing-category",children:[(0,n.jsxs)("div",{className:"category-info",children:[(0,n.jsx)(s.RichText,{tagName:"h2",value:l,onChange:e=>o({categoryTitle:e}),placeholder:(0,i.__)("Kategorian otsikko...","dude")}),(0,n.jsx)(s.RichText,{tagName:"p",value:r,onChange:e=>o({categoryDescription:e}),placeholder:(0,i.__)("Kategorian kuvaus...","dude")})]}),(0,n.jsx)("div",{className:"category-items",children:(0,n.jsxs)("div",{className:"pricing-accordion",children:[0===d.length&&(0,n.jsx)("p",{style:{color:"#999",fontStyle:"italic"},children:(0,i.__)("Lisää tuotteita sivupalkista.","dude")}),d.map((e,i)=>(0,n.jsx)("div",{className:"pricing-accordion-item"+(e.isPopular?" is-popular":""),children:(0,n.jsxs)("div",{className:"item-main",children:[(0,n.jsxs)("div",{className:"item-content",children:[(0,n.jsxs)("div",{className:"item-header",children:[(0,n.jsx)("h3",{children:e.title}),e.isPopular&&(0,n.jsx)("span",{className:"badge",children:"Suosituin"})]}),(0,n.jsxs)("div",{className:"item-meta",children:[(0,n.jsx)("span",{className:"price",children:e.price}),(0,n.jsx)("span",{className:"description",children:e.shortDescription})]})]}),(0,n.jsx)("span",{className:"icon","aria-hidden":"true"})]})},e.id||i))]})})]})})})]})},save:()=>null})})();